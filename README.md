> 本项目由 GPT-5 与 Claude Sonnet 3.7 生成 / Generated by GPT-5 and Claude Sonnet 3.7
# AutoQuote

学术论文参考文献格式化工具，专注于 GB/T 7714-2015 标准（顺序编码制）。将各种常见格式（APA、BibTeX、网页条目等）转换为规范引用格式，并可生成 LaTeX `\bibitem` 代码。

**在线使用：[https://aq.nescript.tech/](https://aq.nescript.tech/)**

## 主要特性

| 功能 | 描述 |
|------|------|
| 多种类型 | 期刊文章 `[J]`、会议论文 `[C]`、图书 `[M]`、网络资源 `[EB/OL]`、书籍章节等 |
| 智能解析 | 自动识别 GB/T 原文、APA 格式、BibTeX 条目、网页引用等多种输入形式 |
| 智能作者处理 | 支持中英文混排、多作者自动"等"/`et al.`处理、机构作者、连续中文姓名智能拆分 |
| 专业标准化 | 规范化 DOI（去除前缀）、保留完整 URL、智能提取页码/卷期信息 |
| LaTeX 集成 | 一键生成 `\bibitem{key}`，自动基于首作者与年份创建引用键 |
| 多平台支持 | 图形界面、命令行、Web 应用三种使用方式，满足不同场景需求 |

## 使用方式

### Web 应用（推荐）

直接访问：[https://aq.nescript.tech/](https://aq.nescript.tech/)

功能特点：
- 无需安装，随时随地使用
- 批量处理多条参考文献
- 支持 GB/T 和 LaTeX `\bibitem` 两种输出格式
- 适合临时使用或团队共享

### 桌面版（Windows）

1. 前往 [GitHub Releases](https://github.com/Nescript/AutoQuote/releases) 下载最新版 `AutoQuoteGUI-<version>-win64.exe`
2. 双击运行程序（首次运行可能需点击"更多信息"→"仍要运行"）
3. 在界面中：
   - 「解析/标准化」页面粘贴原始参考文献，点击「解析并格式化」
   - 「字段录入」页面可手动输入各字段信息
   - 复制生成的 GB/T 格式或 LaTeX `\bibitem` 代码

优势：
- 离线使用，不依赖网络
- 包含所有功能，无需安装 Python 环境
- 提供字段手动录入功能

### 命令行（开发者）

```bash
python main.py normalize "Lee J, Hwangbo J, Wellhausen L, et al. Learning quadrupedal locomotion over challenging terrain[J]. Science Robotics, 2020, 5(47): eabc5986."
```

## 示例

### APA 期刊输入
```
Smith, J., Doe, A. B., & Zhang, W. (2021). A novel method for something. 
Journal of Interesting Results, 15(2), 123-135. https://doi.org/10.1234/abc.def/5678
```

### GB/T 输出
```
Smith J, Doe A B, Zhang W. A novel method for something[J]. Journal of Interesting Results, 
2021, 15(2): 123-135. DOI: 10.1234/abc.def/5678
```

### BibTeX 输入
```
@inproceedings{Vaswani2017AttentionIA,
  title={Attention is All you Need},
  author={Ashish Vaswani and Noam M. Shazeer and Niki Parmar and Jakob Uszkoreit 
  and Llion Jones and Aidan N. Gomez and Lukasz Kaiser and Illia Polosukhin},
  booktitle={Neural Information Processing Systems},
  year={2017},
  url={https://api.semanticscholar.org/CorpusID:13756489}
}
```

### 部分作者截断后输出
```
Vaswani A, Shazeer N M, Parmar N, et al. Attention is All you Need[C] // 
Neural Information Processing Systems. 2017.
```

## 部署指南

### 1. 本地开发环境

需求：Python 3.9+ 及以下依赖

```bash
# 克隆仓库
git clone https://github.com/Nescript/AutoQuote.git
cd AutoQuote

# 创建虚拟环境
python -m venv .venv
source .venv/bin/activate  # Linux/MacOS
# 或
.\.venv\Scripts\Activate.ps1  # Windows PowerShell

# 安装依赖
pip install -r requirements.txt

# 本地运行 Web 应用
pip install -e ".[web]"  # 安装带 web 依赖的开发版本
python -m webapp.main  # 启动 Web 服务
```

### 2. 服务器部署（Ubuntu/Debian）

1. **准备环境**

```bash
# 更新系统并安装依赖
sudo apt update
sudo apt install -y python3 python3-pip python3-venv nginx

# 创建应用目录
sudo mkdir -p /opt/autoquote/app
sudo chown $USER:$USER /opt/autoquote/app
```

2. **部署应用**

```bash
# 复制代码到服务器
git clone https://github.com/Nescript/AutoQuote.git /opt/autoquote/app

# 创建虚拟环境
cd /opt/autoquote/app
python3 -m venv .venv
source .venv/bin/activate

# 安装依赖
pip install -r requirements.txt
pip install ".[web]"
```

3. **配置 systemd 服务**

```bash
sudo nano /etc/systemd/system/autoquote.service
```

内容如下：

```ini
[Unit]
Description=AutoQuote Web Application
After=network.target

[Service]
User=www-data
Group=www-data
WorkingDirectory=/opt/autoquote/app
Environment="PATH=/opt/autoquote/app/.venv/bin"
ExecStart=/opt/autoquote/app/.venv/bin/uvicorn webapp.main:app --host 127.0.0.1 --port 8800

[Install]
WantedBy=multi-user.target
```

启动服务：

```bash
sudo systemctl daemon-reload
sudo systemctl start autoquote
sudo systemctl enable autoquote
```

4. **配置 Nginx**

```bash
sudo nano /etc/nginx/sites-available/autoquote.conf
```

内容如下：

```nginx
server {
    server_name your-domain.com;  # 替换为您的域名

    client_max_body_size 4m;

    location /static/ {
        alias /opt/autoquote/app/webapp/static/;
        add_header Cache-Control "public, max-age=86400";
    }

    location / {
        proxy_pass http://127.0.0.1:8800;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_read_timeout 120;
    }

    listen 80;
}
```

启用配置：

```bash
sudo ln -s /etc/nginx/sites-available/autoquote.conf /etc/nginx/sites-enabled/
sudo nginx -t  # 检查配置
sudo systemctl reload nginx
```

5. **SSL 配置（HTTPS）**

```bash
sudo apt install -y certbot python3-certbot-nginx
sudo certbot --nginx -d your-domain.com
```

确保防火墙允许 HTTP 和 HTTPS 流量：

```bash
sudo ufw allow 'Nginx Full'
```

6. **维护命令**

```bash
# 查看应用日志
sudo journalctl -u autoquote

# 重启应用
sudo systemctl restart autoquote

# 更新应用
cd /opt/autoquote/app
sudo -u www-data git pull
sudo -u www-data /opt/autoquote/app/.venv/bin/pip install -e ".[web]"
sudo systemctl restart autoquote
```

## 开发指南

### 目录结构

```
gbt7714/           # 核心库
  models.py        # 数据模型定义
  formatters.py    # 格式化实现
  parser.py        # 多格式解析器
webapp/            # Web 应用
  main.py          # FastAPI 应用入口
  templates/       # Jinja2 模板
  static/          # 静态资源
gui.py             # 图形界面
main.py            # 命令行入口
tests.py           # 测试套件
```

### 测试

```bash
python tests.py
```

### 打包与分发

**PyPI 包**：
```bash
python -m build
twine upload dist/*
```

**独立 exe**：
```bash
pyinstaller -F -w -n AutoQuoteGUI gui.py
```

## 开发路线图

| 功能 | 状态 |
|------|------|
| 基础引用类型支持 | ✅ 已完成 |
| 用户友好的 GUI | ✅ 已完成 |
| Web 应用部署 | ✅ 已完成 |
| 学位论文/报告类型 | 🔄 进行中 |
| 批量导入导出 | 🔄 进行中 |
| 外部元数据接口 | 📅 计划中 |
| RIS/BibTeX 导出 | 📅 计划中 |

## 许可证

MIT
